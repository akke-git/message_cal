# 메시지 캘린더 연동 앱 PRD

---

## 개발 진행 상황 (2025-06-23 기준)

### 🎉 최신 완료 작업 (2025-06-23 업데이트)
1.  **핵심 기능 구현 완료:**
    *   **공유 인텐트 처리 개선:** `home_screen.dart`와 `share_receiver_screen.dart`에서 공유된 텍스트를 올바르게 처리하도록 수정
    *   **AI 기반 텍스트 분석 구현:** 공유된 메시지에서 일정 정보 자동 추출 (날짜, 시간, 장소, 카테고리)
    *   **향상된 일정 생성 UI:** 사용자 친화적인 일정 생성 폼 구현
    *   **카테고리 자동 분류:** 키워드 기반 자동 카테고리 분류 시스템 구현

2.  **UI/UX 대폭 개선:**
    *   **홈 화면 개선:** 더 직관적인 안내 메시지와 최근 공유 메시지 표시
    *   **캘린더 화면 구현:** 월별 캘린더 뷰와 일정 목록 표시
    *   **설정 화면 완전 재구성:** Google 계정 관리, 앱 설정, 정보 섹션으로 체계화
    *   **Material Design 3 적용:** 일관된 디자인 시스템 적용

3.  **코드 품질 향상:**
    *   **에러 처리 개선:** 모든 비동기 작업에 적절한 에러 처리 추가
    *   **상태 관리 최적화:** StatefulWidget 적절히 활용한 반응형 UI
    *   **한국어 지원 강화:** 모든 UI 텍스트 한국어로 현지화

### 이전 완료 작업
1.  **프로젝트 안정화 완료:**
    *   `main.dart`, `home_screen.dart`, `share_receiver_screen.dart` 등 프로젝트 전반에 걸쳐 있던 파일 손상 및 문법 오류를 모두 수정하여 앱이 정상적으로 빌드 및 실행될 수 있는 상태로 복원했습니다.
    *   `receive_sharing_intent` 패키지의 API 변경점에 맞춰 `home_screen.dart`와 `share_receiver_screen.dart`의 코드를 최신 버전으로 업데이트했습니다.

2.  **안드로이드 공유 기능 최적화:**
    *   **해결 완료:** 안드로이드 공유 메뉴(Share Sheet)에서 MessageCal 앱 인식 및 텍스트 데이터 처리 문제 해결
    *   **적용된 수정사항:**
        *   `intent-filter`의 `mimeType`을 `text/*`로 설정하여 모든 텍스트 타입 지원
        *   `SEND` 및 `SEND_MULTIPLE` 액션 모두 지원
        *   `launchMode="singleTask"` 설정으로 멀티 인스턴스 방지
        *   공유된 텍스트 데이터 올바른 파싱 및 처리 로직 구현

### 다음 단계 계획
1.  **Google Calendar API 연동 구현 (최우선 과제):**
    *   `AuthService` 클래스를 활용한 Google Calendar API 실제 연동
    *   `ShareReceiverScreen`에서 '저장' 버튼 클릭 시 실제 캘린더 이벤트 생성
    *   오프라인/온라인 상태 처리 및 동기화 로직 구현

2.  **텍스트 분석 엔진 고도화:**
    *   현재 기본적인 정규표현식 기반 분석을 더 정교한 NLP 모델로 업그레이드
    *   다양한 메시지 패턴에 대한 학습 데이터 구축
    *   분석 정확도 향상 및 예외 상황 처리 강화

3.  **실제 기기 테스트 및 최적화:**
    *   다양한 메신저 앱 (카카오톡, 문자메시지, 텔레그램 등)에서 공유 기능 테스트
    *   성능 최적화 및 메모리 사용량 개선
    *   사용자 경험 개선을 위한 피드백 수집 및 반영

**Product Requirements Document**

---

## 12. 사용자 시나리오

### 12.1 기본 사용 플로우
1. **메시지 수신**: 카카오톡에서 "내일 오후 2시에 강남역에서 만나요" 메시지 받음
2. **공유 실행**: 메시지 길게 눌러서 '공유' → 'MessageCal' 선택
3. **자동 분석**: 앱이 자동으로 날짜(내일), 시간(오후 2시), 장소(강남역) 추출
4. **카테고리 분류**: AI가 '개인' 카테고리로 자동 분류
5. **확인 및 저장**: 사용자가 내용 확인 후 '저장' 버튼 클릭
6. **캘린더 동기화**: 구글 캘린더에 자동으로 일정 생성

### 12.2 다양한 메신저 지원
- **문자메시지**: "12/25 10:00 병원 예약" → 공유 → 즉시 일정 생성
- **카카오톡**: 단체방 약속 메시지 → 공유 → 자동 분석
- **텔레그램**: 업무 미팅 일정 → 공유 → 업무 카테고리 자동 분류
- **라인**: 모임 약속 → 공유 → 개인 카테고리 자동 분류

### 12.3 에러 처리 시나리오
- **날짜 불명확**: "다음주에 만나요" → 사용자에게 구체적 날짜 입력 요청
- **분석 실패**: 일정과 무관한 텍스트 → "일정 정보를 찾을 수 없습니다" 안내
- **네트워크 오류**: 오프라인 상태 → 로컬 저장 후 온라인 시 동기화

---

## 1. 제품 개요

### 1.1 제품명
**MessageCal** (메시지캘)

### 1.2 제품 설명
안드로이드 문자 메시지와 카카오톡 등 SNS 앱에서 받은 메시지를 선택하여 구글 캘린더에 자동으로 분류하고 일정으로 등록하는 스마트 캘린더 연동 앱

### 1.3 핵심 가치 제안
- 메신저 앱에서 바로 공유하여 일정 생성
- AI 기반 카테고리 자동 분류
- 구글 캘린더와 완벽 동기화
- 권한 최소화로 안전한 사용자 경험

---

## 2. 목표 및 배경

### 2.1 비즈니스 목표
- 메시지 기반 일정 관리의 디지털 전환
- 사용자의 일정 관리 효율성 극대화
- 구글 생태계와의 완벽한 통합

### 2.2 사용자 문제점
- 메시지로 받은 약속이나 일정을 수동으로 캘린더에 입력하는 번거로움
- 여러 메신저 앱에 분산된 일정 정보를 하나씩 확인해야 하는 불편함
- 중요한 약속이나 일정을 놓치는 경우 발생

### 2.3 해결 방안
- 모든 메신저 앱에서 '공유' 버튼 한 번으로 일정 생성
- 메시지 내용 자동 분석 및 일정 추출
- 카테고리별 자동 분류 시스템
- 구글 캘린더 API를 통한 실시간 동기화

---

## 3. 타겟 사용자

### 3.1 주요 타겟
- **직장인**: 업무 관련 약속과 개인 일정을 효율적으로 관리하고 싶은 사용자
- **금융업 종사자**: 고객 미팅, 업무 일정이 메시지로 자주 오는 사용자
- **프리랜서**: 다양한 클라이언트와의 일정을 체계적으로 관리해야 하는 사용자

### 3.2 사용자 페르소나
**김민수 (32세, 증권회사 직원)**
- 고객과의 미팅 일정이 문자나 카카오톡으로 자주 변경됨
- 구글 캘린더를 주로 사용하지만 메시지 확인 후 수동 입력이 번거로움
- 효율적인 일정 관리 도구를 찾고 있음

---

## 4. 기능 요구사항

### 4.1 핵심 기능

#### 4.1.1 공유 데이터 수신 및 분석
- **Intent 수신**: 안드로이드 공유 기능을 통한 텍스트 데이터 수신
- **다중 앱 지원**: 문자, 카카오톡, 텔레그램, 라인 등 모든 메신저 앱 지원
- **공유 데이터 처리**: 공유된 텍스트에서 일정 관련 정보 추출
- **텍스트 분석**: AI 기반 일정 정보 추출 (날짜, 시간, 장소, 내용)
- **즉시 처리**: 공유와 동시에 일정 생성 화면으로 이동

#### 4.1.2 자동 카테고리 분류
- **업무**: 회의, 미팅, 출장 등
- **개인**: 약속, 모임, 개인 일정 등
- **건강**: 병원, 운동, 건강 관리 등
- **금융**: 금융 상품 설명, 고객 상담 등
- **기타**: 분류되지 않는 일반 일정

#### 4.1.3 구글 캘린더 연동
- **Google Calendar API 연동**: OAuth 2.0 인증
- **일정 자동 생성**: 분석된 정보로 캘린더 이벤트 생성
- **실시간 동기화**: 앱에서의 변경사항 즉시 반영
- **중복 방지**: 동일한 일정 중복 생성 방지

#### 4.1.4 일정 편집 및 관리
- **일정 수정**: 생성된 일정의 세부 정보 편집
- **카테고리 변경**: 자동 분류된 카테고리 수정
- **알림 설정**: 일정별 맞춤 알림 설정
- **일정 삭제**: 불필요한 일정 삭제

### 4.2 부가 기능

#### 4.2.1 대시보드
- **오늘의 일정**: 당일 예정된 일정 요약
- **주간 뷰**: 주간 일정 미리보기
- **카테고리별 통계**: 카테고리별 일정 분포 차트

#### 4.2.2 설정 및 커스터마이징
- **카테고리 관리**: 사용자 정의 카테고리 추가/삭제
- **알림 설정**: 기본 알림 시간 설정
- **테마 설정**: 라이트/다크 모드 (기본: 라이트)

---

## 5. 비기능 요구사항

### 5.1 성능 요구사항
- **응답 시간**: 메시지 분석 3초 이내
- **동기화 시간**: 구글 캘린더 동기화 5초 이내
- **앱 시작 시간**: 3초 이내

### 5.2 보안 요구사항
- **권한 관리**: 최소 필요 권한만 요청
- **데이터 암호화**: 민감한 메시지 데이터 로컬 암호화
- **OAuth 2.0**: 구글 계정 안전한 인증

### 5.3 사용성 요구사항
- **직관적 UI**: 3단계 이내로 모든 기능 접근
- **접근성**: 안드로이드 접근성 가이드라인 준수
- **오프라인 지원**: 네트워크 없이도 기본 기능 사용 가능

---

## 6. 기술 스택

### 6.1 개발 환경
- **프레임워크**: Flutter 3.x
- **언어**: Dart
- **IDE**: Android Studio / VS Code

### 6.2 백엔드 및 API
- **Google Calendar API**: 캘린더 연동
- **OAuth 2.0**: 구글 인증
- **Firebase**: 사용자 데이터 저장 (선택사항)

### 6.3 AI/ML
- **자연어 처리**: Flutter용 NLP 패키지
- **날짜/시간 추출**: 정규표현식 + ML 모델

### 6.4 주요 패키지
```yaml
dependencies:
  flutter: sdk
  google_sign_in: ^6.0.0
  googleapis: ^11.0.0
  intl: ^0.18.0
  receive_sharing_intent: ^1.4.5  # 공유 데이터 수신
  shared_preferences: ^2.0.0
  sqflite: ^2.0.0
  url_launcher: ^6.0.0
```

---

## 7. UI/UX 가이드라인

### 7.1 디자인 시스템
- **Material Design 3**: Google의 최신 디자인 시스템
- **컬러 스킴**: 라이트 모드 기본, 브랜드 컬러는 파란색 계열
- **폰트**: Apple SD Gothic Neo (시스템 기본)

### 7.2 화면 구성

#### 7.2.1 스플래시 화면
- 앱 로고와 간단한 애니메이션
- 로딩 프로그레스 바
- 브랜드 이미지 (캘린더와 메시지 아이콘 조합)

#### 7.2.2 메인 화면
- 상단: 오늘 날짜와 간단한 일정 요약
- 중앙: 최근 생성된 일정 목록 (최대 5개)
- 안내 텍스트: "메신저에서 공유하여 일정을 추가하세요"
- 하단: 네비게이션 바 (홈, 캘린더, 설정)

#### 7.2.3 공유 수신 화면 (일정 생성)
- 공유된 메시지 텍스트 표시
- AI 분석 결과 (제목, 날짜, 시간, 장소) 자동 입력
- 카테고리 자동 선택 (수정 가능)
- 저장/취소 버튼

#### 7.2.4 일정 편집 화면
- 머티리얼 텍스트 필드
- 날짜/시간 피커
- 카테고리 선택 칩

### 7.3 아이콘 및 이미지
- **메인 아이콘**: 달력과 메시지 버블 조합
- **카테고리 아이콘**: 머티리얼 아이콘 사용
- **일러스트레이션**: 미니멀한 라인 아트 스타일

---

## 8. 개발 로드맵

### 8.1 Phase 1 (3주) - MVP ✅ **완료**
- ✅ 기본 UI 프레임워크 구축 (Material Design 3)
- ✅ 안드로이드 Intent 수신 처리 (완전 구현)
- ✅ 구글 캘린더 연동 (AuthService 구현)
- ✅ 향상된 일정 생성 UI (자동 분석 포함)

### 8.2 Phase 2 (3주) - 고도화 🔄 **진행 중**
- ✅ 기본 메시지 분석 엔진 (정규표현식 기반)
- ✅ 카테고리 자동 분류 (키워드 기반)
- ✅ 일정 편집 기능 (완전한 폼 UI)
- 🔄 Google Calendar API 실제 연동 (진행 중)
- ⏳ 다양한 메신저 앱 테스트 (대기)

### 8.3 Phase 3 (2주) - 완성 ⏳ **대기**
- ✅ 대시보드 구현 (홈 화면 개선)
- ✅ 캘린더 뷰 구현
- ✅ 세부 설정 기능 (설정 화면 완전 구현)
- ⏳ 성능 최적화
- ⏳ 사용자 피드백 반영

### 8.4 Phase 4 (1주) - 배포 준비 ⏳ **대기**
- ⏳ 구글 플레이 스토어 등록
- ⏳ 앱 아이콘 및 스크린샷 준비
- ⏳ 사용자 가이드 작성
- ✅ 공유 기능 기본 구현 완료

**현재 진행률: 약 70% 완료**
**예상 남은 개발 기간: 2-3주**

---

## 9. 제약사항 및 고려사항

### 9.1 기술적 제약사항
- **Intent 데이터 크기**: 안드로이드 Intent 데이터 전송 크기 제한
- **텍스트 포맷 다양성**: 각 앱마다 다른 공유 텍스트 포맷
- **Google API 할당량**: 일일 API 호출 제한

### 9.2 법적 고려사항
- **개인정보보호**: 공유된 데이터만 처리하여 프라이버시 보호
- **데이터 보관**: 임시 처리 후 즉시 삭제 원칙
- **투명성**: 데이터 처리 과정 명확한 안내

### 9.3 사용자 경험 고려사항
- **학습 곡선**: 초기 사용자를 위한 튜토리얼
- **오류 처리**: 메시지 분석 실패 시 대안 제공
- **피드백**: 자동 분류 결과에 대한 사용자 피드백 수집

---

## 10. 성공 지표

### 10.1 사용자 지표
- **월간 활성 사용자**: 1,000명 이상
- **일정 생성 성공률**: 90% 이상
- **사용자 만족도**: 4.5/5.0 이상

### 10.2 기술 지표
- **앱 크래시율**: 1% 이하
- **메시지 분석 정확도**: 85% 이상
- **API 응답 시간**: 평균 2초 이하

---

## 11. 향후 계획

### 11.1 추가 기능
- **다른 메신저 지원**: 텔레그램, 라인 등
- **웹 버전**: 데스크톱 브라우저 지원
- **팀 캘린더**: 공유 캘린더 기능

### 11.2 고도화 방향
- **AI 학습**: 사용자별 맞춤 분류 모델
- **음성 인식**: 음성 메시지 텍스트 변환
- **다국어 지원**: 영어, 중국어 등 확장

## 13. 공유 기능 방식의 장점

### 13.1 개발 관점
- **권한 최소화**: SMS나 메신저 앱 접근 권한 불필요
- **보안 강화**: 사용자가 직접 선택한 데이터만 처리
- **호환성**: 모든 메신저 앱에서 동일하게 작동
- **구현 단순화**: 복잡한 API 연동 없이 Intent 처리만으로 구현

### 13.2 사용자 관점
- **즉시성**: 메시지를 보자마자 바로 공유하여 일정 생성
- **선택적 처리**: 필요한 메시지만 골라서 처리 가능
- **프라이버시**: 앱이 메시지에 직접 접근하지 않아 안전함
- **범용성**: 어떤 앱에서든 공유 기능으로 사용 가능

### 13.3 비즈니스 관점
- **빠른 출시**: 권한 승인 과정 없이 빠른 스토어 등록
- **사용자 신뢰**: 명확한 데이터 처리 방식으로 신뢰성 확보
- **확장성**: 향후 다른 플랫폼(iOS) 확장 시에도 동일한 방식 적용

---

*이 문서는 MessageCal 앱 개발을 위한 상세 요구사항을 정의합니다. 공유 기능 방식 채택으로 더욱 안전하고 효율적인 개발이 가능합니다.*